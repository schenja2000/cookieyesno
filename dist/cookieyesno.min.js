/*
 CookieYesNo | philippG777 | https://github.com/philippG777/cookieyesno | BSD 3-Clause License
*/
var CookieYesNo=function(a){this.cookie={set:function(a,c){var b=new Date;b.setTime(b.getTime()+7776E6);document.cookie=a+"="+c+";expires="+b.toUTCString()+";path=/"},get:function(a){for(var b=document.cookie.split(";"),d=0;d<b.length;d++){var e=b[d].trim().split("=");if(e[0]==a)return e[1]}return null}};this._config=a;this._changeListeners=[];this._acceptListeners=[];this._rejectListeners=[];this.banner=this._createBanner();this._applyStyle();this._addListeners();null==this._load()?this.show():this._runAcceptRejectListeners()};
CookieYesNo.prototype._load=function(){var a=this.cookie.get("_cyn");return null==a?null:JSON.parse(a)};CookieYesNo.prototype._save=function(a){this.cookie.set("_cyn",JSON.stringify(a))};CookieYesNo.prototype.onChange=function(a){this._changeListeners.push(a)};CookieYesNo.prototype.onAccept=function(a,b){!0===this.getSettings()[a]?b():this._acceptListeners.push({name:a,cb:b})};CookieYesNo.prototype.onReject=function(a,b){!1===this.getSettings()[a]?b():this._rejectListeners.push({name:a,cb:b})};
CookieYesNo.prototype.getSettings=function(){var a=this._load();return null==a?{}:a};CookieYesNo.prototype.reviewSettings=function(){this._bannerApplySettings(this.getSettings());this.show()};
CookieYesNo.prototype._createBanner=function(){var a=document.createElement("div");a.className="cyn-banner";var b='<h3 style="font-size: 28px; font-weight: bold;">This site uses cookies</h3><p>'+(this._config.text+"</p>");b+='<table class="cyn-categories"><tbody>';for(var c in this._config.categories){var d=this._config.categories[c];b+='<tr><td style="font-weight:bold;">'+c+"</td><td>"+d.description+"</td><td>";b+='<input type="checkbox" value="'+c+'"'+(d.allowed?" checked":"")+(!0===d.changeable||
void 0===d.changeable?"":" disabled")+"/>";b+="</td></tr>"}b=b+'</tbody></table><p>For detailed information take a look at the <a href="'+(this._config.cookiePolicy+'">Cookie Policy</a>.</p>');a.innerHTML=b+'<button class="cyn-btn-save">Save Settings</button><button class="cyn-btn-accept-all">Accept all</button>';a.style.display="none";document.body.appendChild(a);return a};
CookieYesNo.prototype._bannerApplySettings=function(a){for(var b=this.banner.getElementsByTagName("input"),c=0;c<b.length;c++)"checkbox"==b[c].type&&(b[c].checked=void 0!=a[b[c].value.toLowerCase()]&&1==a[b[c].value.toLowerCase()]?!0:!1)};
CookieYesNo.prototype._applyStyle=function(){var a=this.banner.style;a.zIndex=5E3;a.backgroundColor="#fff";a.position="fixed";a.padding="16px";a.boxShadow="0 0 24px #aaa";a.borderRadius="8px";a.right=768>=window.innerWidth?a.left=a.bottom="16px":a.bottom="32px";a=this.banner.getElementsByTagName("table")[0].style;a.margin="16px";a=this.banner.getElementsByTagName("td");for(var b=0;b<a.length;b++)a[b].style.padding="8px";b=this.banner.getElementsByTagName("button");for(var c=0;c<b.length;c++)a=b[c].style,
a.boxSizing="border-box",a.cursor="pointer",a.margin="8px",a.marginTop="24px",a.borderRadius="4px","cyn-btn-accept-all"==b[c].className?(a.border="0px",a.backgroundColor="#48c774",a.color="white",a.fontWeight="bold",a.fontSize="24px",a.padding="12px",a.paddingLeft=a.paddingRight="16px"):(a.backgroundColor="white",a.color="#999",a.border="2px solid #bbb",a.fontSize="20px",a.padding="8px")};
CookieYesNo.prototype._addListeners=function(){for(var a=this.banner.getElementsByTagName("button"),b=0;b<a.length;b++)a[b].addEventListener("click",this._onButtonClick.bind(this))};
CookieYesNo.prototype._onButtonClick=function(a){var b={};a=a.target.className;if(-1!=a.indexOf("cyn-btn-accept-all"))for(var c in this._config.categories)b[c.toLowerCase()]=!0;else if(-1!=a.indexOf("cyn-btn-save"))for(c=this.banner.getElementsByTagName("input"),a=0;a<c.length;a++)"checkbox"==c[a].type&&(b[c[a].value.toLowerCase()]=c[a].checked);else return;this.hide();for(c=0;c<this._changeListeners.length;c++)this._changeListeners[c](b);this._runAcceptRejectListeners(b);this._save(b)};
CookieYesNo.prototype._runAcceptRejectListeners=function(a){void 0===a&&(a=this.getSettings());for(var b=0;b<this._acceptListeners.length;b++)!0===a[this._acceptListeners[b].name]&&this._acceptListeners[b].cb();for(b=0;b<this._rejectListeners.length;b++)!1===a[this._rejectListeners[b].name]&&this._rejectListeners[b].cb()};CookieYesNo.prototype.show=function(){this.banner.style.display="block"};CookieYesNo.prototype.hide=function(){this.banner.style.display="none"};
