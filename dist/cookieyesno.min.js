var CookieYesNo=function(){"use strict";function t(t){this.cookie={set:function(t,e){var n=new Date;n.setTime(n.getTime()+7776e6),document.cookie=t+"="+e+";expires="+n.toUTCString()+";path=/"},get:function(t){for(var e=document.cookie.split(";"),n=0;n<e.length;n++){var i=e[n].trim().split("=");if(i[0]==t)return i[1]}return null}},this._config=t,this._changeListeners=[],this._acceptListeners=[],this._rejectListeners=[],this.banner=this._createBanner(),this._applyStyle(),this._addListeners(),null==this._load()?this.show():this._runAcceptRejectListeners()}return t.prototype._load=function(){var t=this.cookie.get("_cyn");return null==t?null:JSON.parse(t)},t.prototype._save=function(t){this.cookie.set("_cyn",JSON.stringify(t))},t.prototype.onChange=function(t){this._changeListeners.push(t)},t.prototype.onAccept=function(t,e){!0===this.getSettings()[t]?e():this._acceptListeners.push({name:t,cb:e})},t.prototype.onReject=function(t,e){!1===this.getSettings()[t]?e():this._rejectListeners.push({name:t,cb:e})},t.prototype.getSettings=function(){var t=this._load();return null==t?{}:t},t.prototype.reviewSettings=function(){this._bannerApplySettings(this.getSettings()),this.show()},t.prototype._createBanner=function(){var t=document.createElement("div");t.className="cyn-banner";var e='<h3 style="font-size: 28px; font-weight: bold;">This site uses cookies</h3>';for(var n in e+="<p>"+this._config.text+"</p>",e+='<table class="cyn-categories"><tbody>',this._config.categories){var i=this._config.categories[n];e+='<tr><td style="font-weight:bold;">'+n+"</td><td>"+i.description+"</td><td>",e+='<input type="checkbox" value="'+n+'"'+(i.allowed?" checked":"")+(!0===i.changeable||void 0===i.changeable?"":" disabled")+"/>",e+="</td></tr>"}return e+="</tbody></table>",e+='<p>For detailed information take a look at the <a href="'+this._config.cookiePolicy+'">Cookie Policy</a>.</p>',e+='<button class="cyn-btn-save">Save Settings</button>',e+='<button class="cyn-btn-accept-all">Accept all</button>',t.innerHTML=e,t.style.display="none",document.body.appendChild(t),t},t.prototype._bannerApplySettings=function(t){for(var e=this.banner.getElementsByTagName("input"),n=0;n<e.length;n++)"checkbox"==e[n].type&&(e[n].checked=null!=t[e[n].value.toLowerCase()]&&1==t[e[n].value.toLowerCase()])},t.prototype._applyStyle=function(){var t=this.banner.style;t.zIndex=5e3,t.backgroundColor="#fff",t.position="fixed",t.padding="16px",t.boxShadow="0 0 24px #aaa",t.borderRadius="8px",window.innerWidth<=768?t.right=t.left=t.bottom="16px":t.right=t.bottom="32px",(t=this.banner.getElementsByTagName("table")[0].style).margin="16px";for(var e=this.banner.getElementsByTagName("td"),n=0;n<e.length;n++)e[n].style.padding="8px";for(var i=this.banner.getElementsByTagName("button"),o=0;o<i.length;o++)(t=i[o].style).boxSizing="border-box",t.cursor="pointer",t.margin="8px",t.marginTop="24px",t.borderRadius="4px","cyn-btn-accept-all"==i[o].className?(t.border="0px",t.backgroundColor="#48c774",t.color="white",t.fontWeight="bold",t.fontSize="24px",t.padding="12px",t.paddingLeft=t.paddingRight="16px"):(t.backgroundColor="white",t.color="#999",t.border="2px solid #bbb",t.fontSize="20px",t.padding="8px")},t.prototype._addListeners=function(){for(var t=this.banner.getElementsByTagName("button"),e=0;e<t.length;e++)t[e].addEventListener("click",this._onButtonClick.bind(this))},t.prototype._onButtonClick=function(t){var e={},n=t.target.className;if(-1!=n.indexOf("cyn-btn-accept-all"))for(var i in this._config.categories)e[i.toLowerCase()]=!0;else{if(-1==n.indexOf("cyn-btn-save"))return;for(var o=this.banner.getElementsByTagName("input"),s=0;s<o.length;s++)"checkbox"==o[s].type&&(e[o[s].value.toLowerCase()]=o[s].checked)}this.hide();for(var r=0;r<this._changeListeners.length;r++)this._changeListeners[r](e);this._runAcceptRejectListeners(e),this._save(e)},t.prototype._runAcceptRejectListeners=function(t){void 0===t&&(t=this.getSettings());for(var e=0;e<this._acceptListeners.length;e++)!0===t[this._acceptListeners[e].name]&&this._acceptListeners[e].cb();for(var n=0;n<this._rejectListeners.length;n++)!1===t[this._rejectListeners[n].name]&&this._rejectListeners[n].cb()},t.prototype.show=function(){this.banner.style.display="block"},t.prototype.hide=function(){this.banner.style.display="none"},t}();
